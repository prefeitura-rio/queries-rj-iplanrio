version: 2

models:
  - name: raw_cadastro_comercio_ambulantes_autorizacao
    description: "Dados da Autorização e do titular correspondente do comércio ambulante. Origem: dbo.vw_autorizacao_datalake."
    config:
      alias: raw_cadastro_comercio_ambulantes_autorizacao
      schema: raw
      materialized: view
    columns:
      - name: id_autoriz_titular
        description: "Identificador interno da autorização do Titular"
        datatype: Integer
        tests:
          - not_null
      - name: num_inscricao_municipal
        description: "Número da Inscrição Municipal (e da Autorização ) do Titular da Autorização"
        datatype: String
      - name: tipo_pessoa
        description: "Pessoa Fisica (F) ou Juridica (J)"
        datatype: String
      - name: cpf_titular
        description: "Número do CPF do Titular da Autorização"
        datatype: String
      - name: nome_titular_autoriz
        description: "Nome do Titular da Autorização"
        datatype: String
      - name: sit_inscricao_municipal
        description: "Situação da Inscrição Municipal do Titular da Autorização, podendo ser: PENDENTE, CANCELADO ou ATIVO"
        datatype: String
      - name: dt_concessao
        description: "Data que Autorização foi concedida"
        datatype: Datetime
        tests:
          - not_null
      - name: dt_cancelamento
        description: "Data que Autorização foi cancelada"
        datatype: Datetime
      - name: end_corporativo_cod_logradouro_ponto
        description: "Código do Logradouro (Corporativo) do endereço do ponto do Titular da Autorização"
        datatype: String
      - name: end_corporativo_logradouro_ponto
        description: "Logradouro (Corporativo) do endereço do ponto do Titular da Autorização"
        datatype: String
      - name: end_corporativo_referencia_ponto
        description: "Referência do ponto do Titular da Autorização, exemplo: Em frente, esquina, no entorno, perto de etc"
        datatype: String
      - name: end_corporativo_num_porta_ponto
        description: "Número da porta do endereço do Ponto do Titular da Autorização"
        datatype: String
      - name: end_corpotativo_compl_ponto
        description: "Complemento  do endereço do Ponto do Titular da Autorização"
        datatype: String
      - name: end_cod_bairro_ponto
        description: "Código do Bairro (Corporativo)  do endereço do Ponto do Titular da Autorização"
        datatype: String
      - name: end_bairro_ponto
        description: "Nome do Bairro do endereço do Ponto do Titular da Autorização"
        datatype: String
      - name: nom_equip_autorizado
        description: "Equipamento autorizado para utilização"
        datatype: String
      - name: ind_autoriz_permanente
        description: "Autorização Permanente (S) ou Temporária (N) - Ex: Autorizações concedidas para trabalhar durante o Carnaval"
        datatype: String
        tests:
          - not_null
      - name: num_processo_concessao
        description: "Número do Processo Administrativo que contém o deferimento para o Titular da autorização trabalhar no comércio ambulante"
        datatype: String
      - name: num_interno_agrupam_concessao
        description: "Agrupamento interno do sistema para conceder as Autorizações" 
        datatype: String

sources:
  - name: brutos_cadastro_comercio_ambulantes_staging
    database: rj-iplanrio-dev   # optional if same as target
    schema: brutos_cadastro_comercio_ambulantes_staging
    tables:
      - name: vw_autorizacao_datalake
        description: "Tabela de autorizações do sistema de cadastro de comércio de ambulantes"         