version: 2

sources:
  - name: sme_brutos_gestao_escolar_staging_airbyte
    database: rj-iplanrio
    schema: brutos_gestao_escolar_staging
    tables:
      - name: ACA_AlunoCurriculo
      - name: ACA_Avaliacao
      - name: ACA_TipoTurno
      - name: ACA_Turno
      - name: ACA_TurnoHorario
      - name: CLS_TurmaAula
      - name: ESC_Escola
      - name: MTR_MatriculaTurma
      - name: MTR_ProcessoFechamentoInicio
      - name: TUR_Turma
      - name: TUR_TurmaCurriculo
      - name: TUR_TurmaDisciplina
        config:
          freshness:
            error_after: {count: 96, period: hour}
      - name: VW_BI_Aluno

    config:
      freshness: # default freshness
        error_after: {count: 24, period: hour}
      loaded_at_field: _airbyte_extracted_at

  - name: sme_brutos_gestao_escolar_staging_prefect
    database: rj-iplanrio
    schema: brutos_gestao_escolar_staging
    tables:
      - name: VW_BI_Aluno_Todos_Os_Anos
      - name: CLS_AlunoAvaliacaoTurma

    config:
      freshness: # default freshness
        error_after: {count: 24, period: hour}
      loaded_at_field: CAST(_prefect_extracted_at AS TIMESTAMP)