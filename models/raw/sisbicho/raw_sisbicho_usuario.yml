version: 2

models:
  - name: raw_sisbicho_usuario
    description: "Tabela contendo os registros de usuários do sistema SisBicho, incluindo responsáveis técnicos e profissionais veterinários"
    columns:
      - name: usuario_codigo
        description: "Código único de identificação do usuário no sistema, composto por números e/ou letras. Utilizado para acesso e controle interno"
        data_tests:
          - unique:
              name: raw_sisbicho_raw_sisbicho_usuario__usuario_codigo__unique
              severity: error
          - not_null:
              name: raw_sisbicho_raw_sisbicho_usuario__usuario_codigo__not_null
              severity: error

      - name: crmv_numero
        description: "Número do Conselho Regional de Medicina Veterinária do responsável técnico, identificando-o de forma única e validando sua credencial profissional"
        data_tests:
          - not_null:
              name: raw_sisbicho_raw_sisbicho_usuario__crmv_numero__not_null
              severity: error
          - dbt_expectations.expect_column_values_to_match_regex:
              name: raw_sisbicho_raw_sisbicho_usuario__crmv_numero__valid_format
              regex: '^\d{5,6}$'
              severity: warn 